
#include <REG51.H> //这个是8051头文件，不加的话就跑不动
#define uchar unsigned char //偷个懒，否则老是要输入unsigned char
sbit beepIO=P2^3;//这里要把蜂鸣器连到P2.3口，你要是愿意你可以改改（反正72喜欢用P2.3）
/*
     洛天依-前尘如梦   8051版

	 关键:请不要使用STC12C5A60S2之类的1T单片机运行，请使用STC89C52RC之类的12T单片机运行
	 */
uchar m,n; 	
uchar code T[49][2]={{0,0},	 				   
{0xF8,0x8B},{0xF8,0xF2},{0xF9,0x5B},{0xF9,0xB7},{0xFA,0x14},{0xFA,0x66},{0xFA,0xB9},{0xFB,0x03},{0xFB,0x4A},{0xFB,0x8F},{0xFB,0xCF},{0xFC,0x0B},
{0xFC,0x43},{0xFC,0x78},{0xFC,0xAB},{0xFC,0xDB},{0xFD,0x08},{0xFD,0x33},{0xFD,0x5B},{0xFD,0x81},{0xFD,0xA5},{0xFD,0xC7},{0xFD,0xE7},{0xFE,0x05},
{0xFE,0x21},{0xFE,0x3C},{0xFE,0x55},{0xFE,0x6D},{0xFE,0x84},{0xFE,0x99},{0xFE,0xAD},{0xFE,0xC0},{0xFE,0x02},{0xFE,0xE3},{0xFE,0xF3},{0xFF,0x02},
{0xFF,0x10},{0xFF,0x1D},{0xFF,0x2A},{0xFF,0x36},{0xFF,0x42},{0xFF,0x4C},{0xFF,0x56},{0xFF,0x60},{0xFF,0x69},{0xFF,0x71},{0xFF,0x79},{0xFF,0x81}
};
uchar code music[][2]={{0,4}, //这里是歌词~
{20,4},{17,2},{15,4},{17,4},{15,4},{13,4},{15,4},{17,6},{20,4},{17,2},{15,4},{13,4},{15,4},{17,4},{15,4},{13,2},
{13,4},    //林立楼房堵得心慌，来往人群淹没我悲伤
{22,4},{20,2},{17,4},{22,4},{17,2},{20,2},{22,4},{20,2},{0,2},{17,2},{20,2},{22,2},{25,6},{22,4},{20,2},
{17,4},{15,16},  //想远远离开那喧闹场，独自回房空荡荡
{20,4},{17,2},{15,4},{17,4},{15,4},{13,4},{15,4},{17,6},{20,4},{17,2},{15,4},{13,4},{15,4},{17,4},{15,4},{13,2},
{13,4},     //灯火彷徨醉的受伤，月牙凄凉洒了一地霜
{22,4},{20,2},{17,4},{17,2},{15,2},{13,2},{20,2},{22,4},{20,2},{0,2},{20,2},{20,2},{17,2},{15,4},{17,2},{20,2},{15,2},{13,2},{10,6},
{13,16},{0,8},  //想静静进入那温柔乡，梦中寻找看见前世窗
{20,2},{22,2},{25,2},{22,2},{20,2},{17,2},{15,2},{17,2},{20,2},{22,2},
{20,6},{0,8}, //梦里哪座小桥桥头瞧呀瞧
{20,2},{22,2},{25,2},{22,2},{20,2},{17,2},{15,2},{17,2},{20,2},{22,2},
{20,6},{0,8},  //梦里那个池塘荷花摇啊摇
{27,4},{29,2},{27,2},{22,4},{25,2},{25,2},{27,4},{29,2},{27,2},{20,4},{25,2},
{29,2},  //撑一把纸伞在雨幕中回转
{29,2},{32,2},{29,2},{27,2},{25,2},{27,2},{25,2},{22,2},{25,2},{27,8},{0,2},{24,2},{22,2},
{20,2},  //只羞舞给中意的你看（我情愿）
{20,2},{22,2},{25,2},{22,2},{20,2},{17,2},{15,2},{17,2},{20,2},{22,2},
{20,6},{0,8}, //前世那只小舟湖上泛啊泛
{20,2},{22,2},{25,2},{22,2},{20,2},{17,2},{15,2},{17,2},{20,2},{22,2},
{20,6},{0,8},  //前世那张山水水墨染啊染

{27,4},{29,2},{27,2},{22,4},{25,2},{25,2},{27,4},{29,2},{32,2},{34,2},{32,2},{27,2},{25,2},{32,2},{29,2},{27,2},{25,2},{27,2},{25,2},{20,2},{22,2},{25,16},{0,8},{17,16},{15,8},{20,4},{22,4},{15,8},{24,8},{25,4},{24,4},{22,4},{20,4},{25,12},{27,2},{29,2},{27,12},{29,4},{25,16},
{25,16}, //点一盏烛光，在长亭外遥遥守望，流不尽的相思和情长
{0xFF,0xFF}};

void delay(uchar p)//用这个延时
{
    uchar i,j; 
    for(;p>0;p--)
    for(i=181;i>0;i--)
    for(j=181;j>0;j--);
}

void pause()//暂停子函数
{
    uchar i,j;
    for(i=150;i>0;i--)
    for(j=150;j>0;j--);
}

void T0_int() interrupt 1 //蜂鸣器驱动函数
{
 beepIO=!beepIO;		 
 TH0=T[m][0]; TL0=T[m][1];
}

void main()//主函数
{
 uchar i=0; 
 TMOD=0x01;  EA=1; ET0=1; 
 while(1) 
      {
        m=music[i][0];n=music[i][1]; 
           if(m==0x00)
             {TR0=0;delay(n);i++;} 
           else if(m==0xFF)
             {TR0=0;delay(30);i=0;} 
           else if(m==music[i+1][0]) 
             {TR0=1;delay(n);TR0=0;pause();i++;}
           else
             {TR0=1;delay(n);i++;}
      }
}
//就这么多啦~ 最后送上来自72的祝福~